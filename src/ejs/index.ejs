<%- include('layout/_head', { title: 'Game Life' }) %>
<%- include('layout/_header') %>

<% const buttons = [
    {
        data: 'long-liver-1',
        img: '../i/1.jpg',
        name: 'Долгожитель'
    },
    {
        data: 'glider',
        img: '../i/2.jpg',
        name: 'Планер'
    },
    {
        data: 'locomotive',
        img: '../i/3.jpg',
        name: 'Паровоз'
    },
    {
        data: 'pulsar',
        img: '../i/4.jpg',
        name: 'Пульсар'
    },
    {
        data: 'glider-gun',
        img: '../i/5.jpg',
        name: 'Планерное ружьё'
    }
] %>

<main>
    <div class="container">
        <div class="life">

            <div class="life__game-container">
                <div class="life__info">
                    <h4>Generation: <span class="js-counter">0</span></h4>
                </div>

                <div class="life__game-box">
                    <div class="life__examples">
                        <% buttons.forEach(({ data, img, name }) => { %>
                            <button class="life__example | js-life-example"
                                    data-figure="<%- data %>"
                                    type="button">
                                <div class="life__example-image">
                                    <img src="<%- img %>" alt="#">
                                </div>

                                <span class="life__example-name"><%- name %></span>
                            </button>
                        <% }) %>
                    </div>

                    <canvas class="js-game-life"></canvas>

                    <div class="life__popup | js-popup" data-popup="about">
                        <button class="life__button | js-btn-close">X</button>
                        <p>Игра «Жизнь» — клеточный автомат, придуманный английским математиком Джоном Конвеем в 1970 году. Это игра без игроков, в которой человек создаёт начальное состояние, а потом лишь наблюдает за её развитием.</p>
                    </div>

                    <div class="life__popup | js-popup" data-popup="rules">
                        <button class="life__button | js-btn-close">X</button>
                        <ul>
                            <li>Каждая клетка на этой поверхности имеет восемь соседей, окружающих её, и может находиться в двух состояниях: быть «живой» (заполненной) или «мёртвой» (пустой). Добавляйте или удаляйте клетки с помощью ЛКМ или добавьте готовые комбинации клеток.</li>
                            <li>Нажимте Run, чтобы запустить игру. Распределение живых клеток в начале игры называется первым поколением. Каждое следующее поколение рассчитывается на основе предыдущего по таким правилам:
                                <ul>
                                    <li>в пустой (мёртвой) клетке, с которой соседствуют три живые клетки, зарождается жизнь;</li>
                                    <li>если у живой клетки есть две или три живые соседки, то эта клетка продолжает жить; в противном случае (если живых соседей меньше двух или больше трёх) клетка умирает («от одиночества» или «от перенаселённости»).</li>
                                </ul>
                            </li>
                            <li>Игра прекращается, если:
                                <ul>
                                    <li>на поле не останется ни одной «живой» клетки;</li>
                                    <li>конфигурация на очередном шаге в точности (без сдвигов и поворотов) повторит себя же на одном из более ранних шагов (складывается периодическая конфигурация)</li>
                                    <li>при очередном шаге ни одна из клеток не меняет своего состояния (частный случай предыдущего правила, складывается стабильная конфигурация)</li>
                                </ul>
                            </li>
                        </ul>
                    </div>

                    <div class="life__info-container">
                        <button class="life__info-button | js-info-button" data-button="about">
                            <span>Об игре</span>
                        </button>
                        <button class="life__info-button | js-info-button" data-button="rules">
                            <span>Как играть</span>
                        </button>
                    </div>
                </div>

                <div class="life__controls">
                    <button class="life__button | js-run-btn" type="button">Run</button>
                    <button class="life__button | js-stop-btn" type="button">Pause</button>
                    <button class="life__button | js-speed-btn" type="button"></button>
                    <button class="life__button | js-restart-btn" type="button">Restart</button>
                </div>
            </div>
        </div>
    </div>
</main>

<%- include('layout/_footer') %>
<%- include('layout/_foot.ejs') %>

