(()=>{"use strict";function e(){for(var e=[],t=0;t<80;t++){for(var n=[],r=0;r<80;r++)n.push(0);e.push(n)}return e}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,o=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===t(o)?o:String(o)),i)}var o}var r=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,i;return r=t,(i=[{key:"newFigure",value:function(e){var t;switch(e){case"long-liver-1":t=this.createLongLiver1();break;case"glider":t=this.createGlider();break;case"locomotive":t=this.createLocomotive();break;case"pulsar":t=this.createPulsar();break;case"glider-gun":t=this.createGliderGun()}return t}},{key:"createLongLiver1",value:function(){var t=e();return t[38][38]=1,t[39][38]=1,t[39][39]=1,t[40][38]=1,t[40][37]=1,t}},{key:"createGlider",value:function(){var t=e();return t[38][38]=1,t[39][38]=1,t[39][37]=1,t[40][37]=1,t[38][36]=1,t}},{key:"createLocomotive",value:function(){var t=e();return t[39][38]=1,t[39][37]=1,t[40][37]=1,t[38][36]=1,t[38][37]=1,t[39][36]=1,t[40][36]=1,t[40][40]=1,t[42][40]=1,t[38][40]=1,t[36][40]=1,t[35][41]=1,t[35][42]=1,t[35][43]=1,t[35][44]=1,t[43][41]=1,t[43][42]=1,t[43][43]=1,t[43][44]=1,t[42][44]=1,t[41][44]=1,t[35][44]=1,t[36][44]=1,t[37][44]=1,t[38][43]=1,t[40][43]=1,t}},{key:"createPulsar",value:function(){var t=e();return t[38][38]=1,t[39][38]=1,t[40][39]=1,t[41][40]=1,t[42][41]=1,t[42][42]=1,t[41][43]=1,t[40][44]=1,t[38][45]=1,t[39][45]=1,t[37][44]=1,t[36][43]=1,t[35][42]=1,t[35][41]=1,t[36][40]=1,t[37][39]=1,t}},{key:"createGliderGun",value:function(){var t=e();return t[30][21]=1,t[30][22]=1,t[31][21]=1,t[31][22]=1,t[30][31]=1,t[31][31]=1,t[32][31]=1,t[29][32]=1,t[28][33]=1,t[28][34]=1,t[33][32]=1,t[34][33]=1,t[34][34]=1,t[31][35]=1,t[29][36]=1,t[33][36]=1,t[32][37]=1,t[31][37]=1,t[30][37]=1,t[31][38]=1,t[30][41]=1,t[29][41]=1,t[28][41]=1,t[30][42]=1,t[29][42]=1,t[28][42]=1,t[27][43]=1,t[31][43]=1,t[31][45]=1,t[32][45]=1,t[27][45]=1,t[26][45]=1,t[29][55]=1,t[28][55]=1,t[29][56]=1,t[28][56]=1,t}}])&&n(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popups=document.querySelectorAll(".js-popup"),this.btnsOpenPopup=document.querySelectorAll(".js-info-button"),this.btnsClosePopup=document.querySelectorAll(".js-btn-close"),this.addEventListeners()}var t,n;return t=e,(n=[{key:"addEventListeners",value:function(){var e=this;this.btnsOpenPopup.forEach((function(t){t.addEventListener("click",(function(t){e.openPopup(t)}))})),this.btnsClosePopup.forEach((function(t){t.addEventListener("click",(function(t){e.closePopup(t)}))}))}},{key:"openPopup",value:function(e){var t=e.currentTarget.dataset.button;this.popups.forEach((function(e){var n=e.dataset.popup===t;e.classList.toggle("_open",n)}))}},{key:"closePopup",value:function(e){e.target.closest(".js-popup").classList.remove("_open")}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===s(i)?i:String(i)),r)}var i}new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.isGameRunning=!1,this.counter=0,this.game=null,this.cell=10,this.map=800,this.speedText="normal",this.gameSpeed=100,this.mapColor="#2e3146",this.cellColor="#dc475c",this.gridColor="rgba(255, 255, 255, 0.1)",this.cells=e(),this.newCells=e(),this.counterElement=document.querySelector(".js-counter"),this.btnRun=document.querySelector(".js-run-btn"),this.btnStop=document.querySelector(".js-stop-btn"),this.btnRestart=document.querySelector(".js-restart-btn"),this.btnSpeed=document.querySelector(".js-speed-btn"),this.btnsExampe=document.querySelectorAll(".js-life-example"),this.canvas=document.querySelector(".js-game-life"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.map,this.canvas.height=this.map,this.figures=new r,this.btnSpeed.textContent="Speed: ".concat(this.speedText),new l,this.runGame(),this.addListeners()}var n,i;return n=t,(i=[{key:"drawGame",value:function(){var t=this;this.ctx.clearRect(0,0,this.map,this.map),this.ctx.fillStyle=this.mapColor,this.ctx.fillRect(0,0,this.map,this.map),this.cells.forEach((function(e,n){t.ctx.beginPath(),t.ctx.moveTo(0,n*t.cell),t.ctx.lineTo(t.map,n*t.cell),t.ctx.strokeStyle=t.gridColor,t.ctx.lineWidth=1,t.ctx.stroke(),t.ctx.beginPath(),t.ctx.moveTo(n*t.cell,0),t.ctx.lineTo(n*t.cell,t.map),t.ctx.strokeStyle=t.gridColor,t.ctx.lineWidth=1,t.ctx.stroke()})),this.cells.forEach((function(e,n){e.forEach((function(e,r){if(1===e){var i=r*t.cell,o=n*t.cell;t.ctx.fillStyle=t.cellColor,t.ctx.fillRect(i,o,t.cell,t.cell)}}))})),this.isGameRunning&&(this.cells.forEach((function(e,n){e.forEach((function(r,i){var o=void 0!==t.cells[n-1]?t.cells[n-1]:t.cells[e.length-1],l=t.cells[n],s=void 0!==t.cells[n+1]?t.cells[n+1]:t.cells[0],c=[void 0!==o[i-1]?o[i-1]:o[e.length-1],o[i],void 0!==o[i+1]?o[i+1]:o[0],void 0!==l[i-1]?l[i-1]:l[e.length-1],void 0!==l[i+1]?l[i+1]:l[0],void 0!==s[i-1]?s[i-1]:s[e.length-1],s[i],void 0!==s[i+1]?s[i+1]:s[0]].filter((function(e){return 1===e})).length;0===r&&3===c?t.newCells[n][i]=1:1===r&&c<2?t.newCells[n][i]=0:1===r&&c>1&&c<4?t.newCells[n][i]=1:1===r&&c>3&&(t.newCells[n][i]=0)}))})),this.counter++,this.counterElement.textContent=String(this.counter),this.cells=this.newCells,this.newCells=e())}},{key:"runGame",value:function(){var e=this;this.game=setInterval((function(){e.drawGame()}),this.gameSpeed)}},{key:"changeSpeed",value:function(){"slow"===this.speedText?(this.gameSpeed=100,this.speedText="normal"):"fast"===this.speedText?(this.gameSpeed=200,this.speedText="slow"):"normal"===this.speedText&&(this.gameSpeed=20,this.speedText="fast"),this.btnSpeed.textContent="Speed: ".concat(this.speedText),clearInterval(this.game),this.runGame()}},{key:"createFigure",value:function(e){var t=e.currentTarget.dataset.figure,n=this.figures.newFigure(t);this.resetGame(n)}},{key:"resetGame",value:function(e){this.isGameRunning=!1,this.cells=e,this.counter=0,this.counterElement.textContent=this.counter}},{key:"addListeners",value:function(){var t=this;this.btnRun.addEventListener("click",(function(){t.isGameRunning=!0})),this.btnStop.addEventListener("click",(function(){t.isGameRunning=!1})),this.btnsExampe.forEach((function(e){e.addEventListener("click",(function(e){t.createFigure(e)}))})),this.btnSpeed.addEventListener("click",(function(){t.changeSpeed()})),this.btnRestart.addEventListener("click",(function(){var n=e();t.resetGame(n)})),this.canvas.addEventListener("click",(function(e){var n=e.offsetX,r=e.offsetY,i=Math.floor(n/t.cell),o=Math.floor(r/t.cell);t.cells[o][i]=1===t.cells[o][i]?0:1}))}}])&&c(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),t}())})();